---
title: "The 2022 Formula 1 Regulations. Clean Racing for Teams or a Red Flag for the FIA?"
output: html_notebook
---

```{r echo=FALSE, results='hide'}
library(tidyverse)
library(data.table)
```

## What is this report about?

Formula 1 has a long, storied history. Considered the Pinnacle of motorsport, there is nothing like it in the world. Single seater, open wheeled cars engineered to perfection, taking corners at impossible speeds, and propelling auto technology to heights never thought possible. Unfortunately, like any other sport, Formula 1 is not perfect, and just like any other sport, it has seen periods of domination where one team would win it all without mercy and not let any other team enjoy a moment in the spotlight. To combat that, the governing body called the FIA changes regulations of Formula 1 cars every few years to shake up the grid and hopefully make competition much closer. Most recently, Mercedes has completely obliterated the competition in the turbo-hybrid era that started in 2014. With the exception of the 2021 season, no team has even come close in performance to Mercedes. The solution was the 2022 regulations, which brought about the biggest change to how the cars are built in the history of the sport. Unfortunately after seeing the 2022 and beginning of the 2023 seasons, some people claim that the new regulations have not improved competition, as the sport has entered an era of domination not by Mercedes, but by Red Bull Racing. This report aims to find the answer to this divide, centered around one question:

## Have the 2022 regulations helped bring competition closer, and do Formula 1 fans enjoy the sport more than in the past?

It is important to note that periods of one team dominating the rest of the grid are nothing new to Formula 1. Michael Schumacher, a driver that is considered a hero to many, was at the helm of Ferrari's domination of the grid in the first half of the 2000's. Then after a few years of competition, the sport entered an era of Red Bull domination, which was then taken over by Mercedes at the beginning of the turbo hybrid era of the sport. Mercedes's reign has been one of the most dominant eras in the history of the sport. Since the end of the 2012 season, the only season to be considered "competitive" between two teams has been 2021 when Red Bull managed to match the pace that Mercedes had for so long. 2021 was considered an ideal year for the competitiveness of the sport, and is the year we will use to compare to the recent 2022 season as a sort of "perfect example" of where some consider the sport should be. For the rest of this report, I will be comparing Lewis Hamilton of Mercedes and Max Verstappen of Red Bull specifically. Both are considered generational talent and the only drivers good enough to rival each other. In the 2021 season that lasted 22 races, the championship was so close between the two that the champion was decided by a pass performed by Max on Hamilton on the last lap of the final race of the season. The last time two drivers were this competitive was the 2012 season.

To start, it is important to note just how close in skill Verstappen and Hamilton are. Attached below is a graph showcasing their performance in qualification at the Monza track in 2021. Qualification is a better indicator than race pace for this kind of comparison because there is no strategy involved in qualifying. Both teams run their cars on the fastest compound of tires with the lowest possible amount of fuel, leaving the results up to the car and the drivers.
```{r, results='hide'}
convertTime <- function(timeData){
  newData <- as.numeric(timeData)
  newData <- newData / 1000
  return(newData)
}
HAM2021SpeedData <- scan("Data/ham_car_data_2021_clean.txt", character(), quote = "")
HAM2021TimeData <- scan("Data/ham_time_data_2021_clean.txt", character(), quote = "")
HAM2021LapData <- data.table(HAM2021TimeData, HAM2021SpeedData)
HAM2021LapData$HAM2021TimeData <- convertTime(HAM2021LapData$HAM2021TimeData)
HAM2021LapData$HAM2021SpeedData <- as.numeric(HAM2021LapData$HAM2021SpeedData)
VER2021SpeedData <- scan("Data/ver_car_data_2021_clean.txt", character(), quote = "")
VER2021TimeData <- scan("Data/ver_time_data_2021_clean.txt", character(), quote = "")
VER2021LapData <- data.table(VER2021TimeData, VER2021SpeedData)
VER2021LapData$VER2021TimeData <- convertTime(VER2021LapData$VER2021TimeData)
VER2021LapData$VER2021SpeedData <- as.numeric(VER2021LapData$VER2021SpeedData)
head(HAM2021LapData)
ggplot() +
  geom_line(data = HAM2021LapData, aes(x = HAM2021TimeData, y = HAM2021SpeedData, color = "Hamilton"), size = 1) +
  geom_line(data = VER2021LapData, aes(x = VER2021TimeData, y = VER2021SpeedData, color = "Verstappen"), size = 1) +
  labs(title = "2021 Lap Time and Speed Comparison",
       x = "Lap Time (s)", y = "Speed (km/h)",
       color = "Driver") +
  scale_color_manual(values = c("red", "blue"),
                     labels = c("Hamilton", "Verstappen"),
                     name = "Driver") +
  theme_classic()
```

With this plot you can see just how equal Hamilton and Verstappen are in terms of skill. For most of the graph, their lines are actually overlapping, and most cases where they don't overlap are in braking zones, which can be attributed to technique (Verstappen preferring to brake earlier than Hamilton). You can also see that the domain for both drivers' graphs is about the same, indicating an almost identical laptime. For this comparison with the 2022 season, I am choosing to once again compare the two drivers in the Monza track. With the way F1 cars are built, different teams' cars might be more suited to different track, so in order to eliminate as many outside variables as possible, it would be fairest to compare the same drivers in the same teams on the same track. Below is the same graph for the 2022 Grand Prix.

```{r, results='hide'}
HAM2022SpeedData <- scan("Data/ham_car_data_2022_clean.txt", character(), quote = "")
HAM2022TimeData <- scan("Data/ham_time_data_2022_clean.txt", character(), quote = "")
HAM2022LapData <- data.table(HAM2022TimeData, HAM2022SpeedData)
HAM2022LapData$HAM2022TimeData <- convertTime(HAM2022LapData$HAM2022TimeData)
HAM2022LapData$HAM2022SpeedData <- as.numeric(HAM2022LapData$HAM2022SpeedData)
VER2022SpeedData <- scan("Data/ver_car_data_2022_clean.txt", character(), quote = "")
VER2022TimeData <- scan("Data/ver_time_data_2022_clean.txt", character(), quote = "")
VER2022LapData <- data.table(VER2022TimeData, VER2022SpeedData)
VER2022LapData$VER2022TimeData <- convertTime(VER2022LapData$VER2022TimeData)
VER2022LapData$VER2022SpeedData <- as.numeric(VER2022LapData$VER2022SpeedData)
ggplot() +
  geom_line(data = HAM2022LapData, aes(x = HAM2022TimeData, y = HAM2022SpeedData, color = "Hamilton"), size = 1) +
  geom_line(data = VER2022LapData, aes(x = VER2022TimeData, y = VER2022SpeedData, color = "Verstappen"), size = 1) +
  labs(title = "2022 Lap Time and Speed Comparison",
       x = "Lap Time (s)", y = "Speed (km/h)",
       color = "Driver") +
  scale_color_manual(values = c("red", "blue"),
                     labels = c("Hamilton", "Verstappen"),
                     name = "Driver") +
  theme_classic()
```

As you can see in the graph representing each driver's fastest lap in 2022, there is a clear difference in lap performance between Hamilton and Verstappen that was not present in 2021. In the graph you can see that Verstappen's graph domain is smaller, indicating that his lap was noticeably faster than Hamilton's. This is also backed up by the graph's relative "lows" which represent the "peak" of a corner on track, the slowest part of the turn. In the 2021 graph you can see that both cars have an almost identical average low speed. In 2022 it is noticeable that in the "medium speed" corners, Verstappen's Red Bull has a much faster "lowest" speed than Hamilton's Mercedes resulting in Max completing the turn faster. This saved time adds up throughout the corners, eventually resulting in a significantly faster lap time. In both years there have been dry track conditions and the track layout has not been updated between the years either. The only changed variable has been the new generation of cars, so this could hint that the new cars have caused a gap between the 2 top teams that was not present in the previous season.